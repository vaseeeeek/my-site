<div class="wa-login-onetime-password-form">
    <form action="" method="post">

        {foreach $fields|default:[] as $field_id => $params}
            {$renderer->renderField($field_id, $params)}
        {/foreach}

        {$renderer->renderCaptcha()}

        {$renderer->renderRememberMe()}

        <div class="field wa-buttons">
            <div class="value wa-submit">

                {$renderer->renderMessages()}

                {$renderer->renderUncaughtErrors()}

                <input type="hidden" name="wa_auth_login" value="1">

                <div class="wa-request-onetime-password-button-wrapper">
                    <button class="button blue wa-request-onetime-password-button" data-href="{$onetime_password_url}">{if !empty($is_api_oauth)}[s`Receive code`]{else}[s`Receive confirmation code`]{/if}</button>
                    {if !empty($is_api_oauth)}
                        [s`or`]
                        <a href="javascript:void(0);" class="wa-login-cancel gray underline">[s`cancel`]</a>
                    {/if}
                    <i class="icon16 loading wa-request-onetime-password-button-loading" style="margin-top: -2px; display: none"></i>
                </div>

                <div class="wa-submit-button-wrapper" style="display: none;">
                    <input type="submit" value="[s`Sign In`]" class="button wa-login-submit">
                    {if !empty($is_api_oauth)}
                        [s`or`]
                        <a href="javascript:void(0);" class="wa-login-cancel gray underline">[s`cancel`]</a>
                    {/if}
                    <i class="icon16 loading wa-loading" style="display: none;"></i>
                </div>

                {if $forgotpassword_url && empty($is_api_oauth)}
                    <a href="{$forgotpassword_url}" class="wa-forgotpassword underline" data-type="forgotpassword">[s`Forgot password?`]</a>
                {/if}
            </div>
        </div>

        {$renderer->renderCsrf()}

    </form>
</div>
